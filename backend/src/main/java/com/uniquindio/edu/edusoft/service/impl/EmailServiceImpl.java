package com.uniquindio.edu.edusoft.service.impl;


import com.uniquindio.edu.edusoft.service.EmailService;
import lombok.RequiredArgsConstructor;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

@Service
@RequiredArgsConstructor
public class EmailServiceImpl implements EmailService {

    @Autowired
    private JavaMailSender mailSender;

    @Override
    public void sendCodeVerifaction(String email, String code) throws Exception {
        String subject = "C√≥digo de verificaci√≥n EduSoft";
        String emailBody = """
        ¬°Hola!
        
        Para completar tu registro en EduSoft, utiliza el siguiente c√≥digo:

        üëâ C√ìDIGO: %s

        Este c√≥digo expirar√° en 1 minuto.

        Atentamente, Equipo EduSoft, Universidad del Quind√≠o
        """.formatted(code);

        SimpleMailMessage message = new SimpleMailMessage();
        message.setTo(email);
        message.setSubject(subject);
        message.setText(emailBody);
        mailSender.send(message);
    }


    @Override
    public void SendMailHome(String email) throws Exception {

        String subject = "Gracias por registrarse a Edusoft";
        String emailBody = "¬°Hola!\n\n" +
                "Gracias por registrarte en EduSoft, la plataforma acad√©mica de la Universidad del Quind√≠o estamos muy felices de tenerte con nosotros.\n\n" +
                "Con EduSoft podr√°s acceder a herramientas dise√±adas para apoyar tu aprendizaje, facilitar tu experiencia acad√©mica y mantenerte conectado con la comunidad universitaria.\n\n" +
                "Tu registro es el primer paso para vivir una experiencia innovadora en la educaci√≥n.\n\n" +
                "¬°Bienvenido a la familia UQ!\n\n" +
                "Atentamente, Equipo EduSoft, Universidad del Quind√≠o";

        SimpleMailMessage message = new SimpleMailMessage();
        message.setTo(email);
        message.setSubject(subject);
        message.setText(emailBody);

        mailSender.send(message);
    }

    @Override
    public void sendmailcourse(String email, String nameCourse) throws Exception {

        String subject = "Inscripci√≥n exitosa al curso - " + nameCourse;

        String emailBody = """
        ¬°Hola!

        Te confirmamos que te has inscrito exitosamente en el curso: %s.

        A partir de ahora podr√°s acceder a todos los contenidos, actividades y recursos disponibles en la plataforma EduSoft de la Universidad del Quind√≠o.

        Te deseamos muchos √©xitos en tu proceso de aprendizaje.

        Atentamente, Equipo EduSoft, Universidad del Quind√≠o
        """.formatted(nameCourse);

        SimpleMailMessage message = new SimpleMailMessage();
        message.setTo(email);
        message.setSubject(subject);
        message.setText(emailBody);

        mailSender.send(message);
    }



}
