<div class="module-page-wrapper">

  <div class="module-column">
    <div class="p-3 h-100">
      <app-create-courses 
        [tituloFormulario]="'Editar Información del Curso'" 
        [textoBoton]="'Actualizar Curso'"
        [cursoEditar]="courseData" 
        [conFondo]="false">
      </app-create-courses>
    </div>
  </div>

  <div class="module-column">
    <div class="p-3 h-100 d-flex flex-column">

      <div class="column-header">
        <button type="button" class="btn-back" (click)="goBack()" title="Regresar a Mis Cursos">
          <i class="bi bi-arrow-left"></i>
        </button>
        <h3>Módulos del Curso</h3>
      </div>

      <div class="module-list flex-grow-1">
        <div *ngIf="loading" class="text-center p-4">Cargando módulos...</div>
        <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

        <ul *ngIf="!loading && modules.length > 0" class="list-unstyled">
          <li *ngFor="let module of modules" class="module-item">
            <div class="module-info">
              <strong>{{ module.name }}</strong>
              <p>{{ module.description }}</p>
            </div>
            <div class="module-buttons">
              <button class="btn btn-sm btn-outline-primary" [routerLink]="['/modules', courseId, 'lessons', module.id]">
                <i class="bi bi-card-list"></i> Lecciones
              </button>
              <button class="btn btn-sm btn-outline-danger" (click)="deleteModule(module)">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </li>
        </ul>

        <div *ngIf="!loading && modules.length === 0" class="text-center p-4">
          <p>Este curso aún no tiene módulos.</p>
        </div>
      </div>

      <div class="module-actions">
        <h4 class="actions-title">Acciones del Curso</h4>
        <div class="d-flex flex-column gap-2">
          <button class="btn btn-primary" [routerLink]="['/modules', courseId, 'create']">
            <i class="bi bi-plus-circle-fill me-2"></i> Crear Módulo
          </button>
          <button class="btn btn-secondary" [routerLink]="['/history', courseId]">
            <i class="bi bi-clock-history me-2"></i> Ver Historial
          </button>
          <button class="btn btn-success" (click)="submitForAudit()">
            <i class="bi bi-check2-circle me-2"></i> Enviar a Auditoría
          </button>
        </div>
      </div>

    </div>
  </div>
</div>