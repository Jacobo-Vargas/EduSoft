<div class="lesson-container">
  <!-- Columna izquierda -->
  <div class="lesson-list">
    <!-- BotÃ³n de regresar arriba a la izquierda -->
    <button type="button" class="btn btn-link p-0 mb-3" (click)="goBack()" title="Regresar">
      <!-- Usamos un Ã­cono de Bootstrap como flecha -->
      <i class="bi bi-arrow-left" style="font-size: 1.5rem;"></i>
    </button>

    <h3>Mis Documentos</h3>

    <div *ngIf="loading">Cargando documentos...</div>
    <div *ngIf="error" class="error">{{ error }}</div>

    <ul *ngIf="!loading && contents.length > 0">
      <li *ngFor="let content of contents" class="lesson-item">
        <!-- Info + preview -->
        <div class="lesson-info">
          <strong>{{ content.title }}</strong>
          <p>{{ content.description }}</p>

          <!-- Renderizado dinÃ¡mico -->
          <ng-container [ngSwitch]="content.fileType">
            <div *ngSwitchCase="'IMAGE'">
              <img [src]="content.fileUrl" alt="{{ content.title }}" style="max-width:200px; border-radius:5px;">
            </div>
            <div *ngSwitchCase="'VIDEO'">
              <video width="250" controls>
                <source [src]="content.fileUrl" type="video/mp4" />
                Tu navegador no soporta video.
              </video>
            </div>
            <div *ngSwitchCase="'AUDIO'">
              <audio controls>
                <source [src]="content.fileUrl" type="audio/mpeg" />
                Tu navegador no soporta audio.
              </audio>
            </div>
            <div *ngSwitchCase="'DOCUMENT'">
              <a [href]="content.fileUrl" target="_blank" class="btn btn-link">
                ðŸ“„ Ver Documento
              </a>
            </div>
            <div *ngSwitchDefault>
              <a [href]="content.fileUrl" target="_blank" class="btn btn-link">
                ðŸ”— Abrir enlace
              </a>
            </div>
          </ng-container>

          <!-- Metadatos -->
          <div class="content-meta">
            <small><b>Curso:</b> {{ content.courseName }}</small>
            <small><b>LecciÃ³n:</b> {{ content.lessonName }}</small>
            <small><b>Orden:</b> {{ content.displayOrder }}</small>
            <small><b>Estado:</b> {{ content.lifecycleStatus }}</small>
            <small><b>Visible:</b> {{ content.isVisible ? 'SÃ­' : 'No' }}</small>
            <small><b>Creado:</b> {{ content.createdAt | date:'short' }}</small>
            <small><b>Actualizado:</b> {{ content.updatedAt | date:'short' }}</small>
          </div>
        </div>

        <!-- BotÃ³n eliminar -->
        <div class="lesson-actions-btn">
          <button class="btn btn-danger" (click)="deleteContent(content)">
            ðŸ—‘ Eliminar
          </button>
        </div>
      </li>
    </ul>

    <div *ngIf="!loading && contents.length === 0">
      <p>No tienes documentos creados.</p>
    </div>
  </div>

  <!-- Columna derecha -->
  <div class="lesson-actions">
    <h3>Acciones</h3>

    <!-- BotÃ³n Crear Documento -->
    <button class="btn btn-primary" [routerLink]="['/lessons', lessonId, 'contents', 'create']">
      âž• Crear Documento
    </button>
  </div>
</div>
