<section class="vh-100 image-background">
  <div class="container py-5 h-100">
    <div class="row justify-content-center align-items-center h-100">
      <div class="col-12 col-md-10 col-lg-8">
        <div class="card shadow" style="border-radius: 1rem;">
          <div class="card-body p-4 p-lg-5 text-black">

            <button type="button" class="person me-2" (click)="goBack()">
              <i class="bi bi-arrow-left"></i>
            </button>

            <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="w-100">

              <!-- T√≠tulo -->
              <div class="text-center mb-4">
                <span class="h1 fw-bold">Registro en EduSoft</span>
                <h5 class="fw-normal mt-2" style="letter-spacing: 1px;">Crea tu cuenta</h5>
              </div>

              <!-- Dos columnas -->
              <div class="row">

                <!-- Documento -->
                <div class="col-md-6 mb-3">
                  <input type="number" class="form-control form-control-lg" formControlName="documentNumber"
                    placeholder="N√∫mero de documento *"
                    [ngClass]="{'is-invalid': userForm.get('documentNumber')?.invalid && userForm.get('documentNumber')?.touched}" />
                  <div class="invalid-feedback">
                    El n√∫mero de documento es obligatorio.
                  </div>
                </div>

                <!-- Nombre -->
                <div class="col-md-6 mb-3">
                  <input type="text" class="form-control form-control-lg" formControlName="name"
                    placeholder="Nombre completo *"
                    [ngClass]="{'is-invalid': userForm.get('name')?.invalid && userForm.get('name')?.touched}" />
                  <div class="invalid-feedback">
                    El nombre es obligatorio.
                  </div>
                </div>

                <!-- Tel√©fono -->
                <div class="col-md-6 mb-3">
                  <input type="text" class="form-control form-control-lg" formControlName="phone"
                    placeholder="Tel√©fono *"
                    [ngClass]="{'is-invalid': userForm.get('phone')?.invalid && userForm.get('phone')?.touched}" />
                  <div class="invalid-feedback">
                    El tel√©fono es obligatorio.
                  </div>
                </div>

                <!-- Direcci√≥n -->
                <div class="col-md-6 mb-3">
                  <input type="text" class="form-control form-control-lg" formControlName="address"
                    placeholder="Direcci√≥n *"
                    [ngClass]="{'is-invalid': userForm.get('address')?.invalid && userForm.get('address')?.touched}" />
                  <div class="invalid-feedback">
                    La direcci√≥n es obligatoria.
                  </div>
                </div>

                <!-- Email -->
                <div class="col-md-6 mb-3">
                  <input type="email" class="form-control form-control-lg" formControlName="email"
                    placeholder="Correo electr√≥nico *"
                    [ngClass]="{'is-invalid': userForm.get('email')?.invalid && userForm.get('email')?.touched}" />
                  <div *ngIf="userForm.get('email')?.touched && userForm.get('email')?.errors">
                    <div class="invalid-feedback d-block" *ngIf="userForm.get('email')?.errors?.['required']">
                      El correo es obligatorio.
                    </div>
                    <div class="invalid-feedback d-block" *ngIf="userForm.get('email')?.errors?.['email']">
                      Ingresa un correo v√°lido.
                    </div>
                  </div>
                </div>

                <!-- Contrase√±a -->
                <div class="col-md-6 mb-3">
                  <div class="position-relative">
                    <input class="form-control form-control-lg pe-5" [type]="showPassword ? 'text' : 'password'"
                      formControlName="password" placeholder="Contrase√±a *"
                      [ngClass]="{'is-invalid': userForm.get('password')?.invalid && userForm.get('password')?.touched}" />
                    <span class="eye-icon position-absolute top-50 end-0 translate-middle-y me-3"
                      (click)="togglePassword()" style="cursor:pointer;">
                      {{ showPassword ? 'üôà' : 'üëÅÔ∏è' }}
                    </span>
                  </div>

                  <!-- Errores de contrase√±a -->
                  <div *ngIf="userForm.get('password')?.touched && userForm.get('password')?.errors">
                    <div class="invalid-feedback d-block" *ngIf="userForm.get('password')?.errors?.['required']">
                      La contrase√±a es obligatoria.
                    </div>
                    <div class="invalid-feedback d-block" *ngIf="userForm.get('password')?.errors?.['minlength']">
                      Debe tener al menos 8 caracteres.
                    </div>
                    <div class="invalid-feedback d-block"
                      *ngIf="userForm.get('password')?.errors?.['passwordStrength']">
                      Debe incluir may√∫scula, min√∫scula, n√∫mero y caracter especial.
                    </div>
                  </div>
                </div>
              </div>

              <!-- reCAPTCHA -->
              <div class="pt-2 mb-3 d-flex justify-content-center">
                <app-recaptcha (tokenGenerated)="onToken($event)"></app-recaptcha>
              </div>

              <!-- Bot√≥n -->
              <div class="pt-1 mb-2 d-flex justify-content-center">
                <button class="btn btn-dark btn-lg w-50" type="submit" [disabled]="isSubmitDisabled()"
                  [class.loading]="isSubmitting">
                  {{ isSubmitting ? 'Registrando...' : 'Aceptar' }}
                </button>
              </div>

              <!-- Enlace login -->
              <p class="text-center mb-3" style="color: #393f81;">
                ¬øYa tienes una cuenta?
                <a class="small text-muted" routerLink="" routerLinkActive="active" aria-current="page">
                  Inicia sesi√≥n aqu√≠
                </a>
              </p>

            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>